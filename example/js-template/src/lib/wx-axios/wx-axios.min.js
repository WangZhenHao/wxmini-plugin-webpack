!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).WxAxois=t()}(this,function(){"use strict";function e(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise(function(e){t=e});var n=this;e(function(e){n.reason||(n.reason="calcel "+e,t(n.reason))})}e.source=function(){var t;return{token:new e(function(e){t=e}),cancel:t}};var t=e;var o=function(e,t){return Object.assign(e,t)};var l=function(e,t,n){var r;(200<=(r=n.statusCode)&&r<300?e:t)(n)};var n=function(e,t){return e&&!/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(t)?(n=e,(e=t)?n.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):n):t;var n};function r(o){var e=o.url,i=o.data,u=o.header,s=o.timeout,a=o.method,c=o.dataType,f=o.responseType,h=o.cancelToken,t=o.baseURL,e=n(t,e);return new Promise(function(t,n){var r=wx.request({url:e,data:i,header:u,timeout:s,method:a,dataType:c,responseType:f,success:function(e){e.config=o,l(t,n,e)},fail:function(e){n(e)}});h&&h.promise.then(function(e){r&&(r.abort(),n(e),r=null)})})}function i(){this.handlers=[]}i.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},i.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},i.prototype.forEach=function(t){this.handlers.forEach(function(e){null!==e&&t(e)})};var u=i;function s(e){this.defaults=e,this.interceptors={request:new u,response:new u}}s.prototype={request:function(e){e=0<arguments.length&&void 0!==e?e:{};(e=o(this.defaults,e)).method||(e.method="get"),e.method=e.method.toLowerCase();var t=[r,null],n=Promise.resolve(e);for(this.interceptors.request.forEach(function(e){t.unshift(e.fulfilled,e.rejected)}),this.interceptors.response.forEach(function(e){t.push(e.fulfilled,e.rejected)});t.length;)n=n.then(t.shift(),t.shift());return n}},["get","post","put"].forEach(function(r){s.prototype[r]=function(e,t,n){return this.request(o(n||{},{url:e,data:t,method:r}))}});var a=s,c={timeout:0,header:{"content-type":"application/json"},method:"GET"};var f=function(e,t){for(var n in t)e[n]=t[n];return e};function h(e){var t=new a(e),e=a.prototype.request.bind(t);return f(e,t),e}var d=h(c);return d.create=function(e){return h(Object.assign(c,e))},d.cancelToken=t,d});
